<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/stylesheets/font-awesome.css" />
      <script src="/javascripts/jquery-1.12.1.js"></script>
      <script src="/javascripts/angular.min.js"></script>
    <link rel="stylesheet" href="/stylesheets/reset.css">
    <link rel="stylesheet" href="/stylesheets/page.css">
    <link rel="stylesheet" href="/stylesheets/animation.css">
    <link rel="stylesheet" href="/stylesheets/theme.css">

    <!--<link rel="stylesheet" href="/stylesheets/SpGrid.css">-->
    <script type="text/javascript" src="/javascripts/dist/SpGrid.js"></script>

      <script type="text/javascript">

        angular.module("gridApp", [ "spGrid"] )
            .controller("gridController", ['$scope','SpGrid','$http', function( $scope, SpGrid, $http ){
                $scope.pagingOptions = {
                    pageSize : 10,
                    pageBlockSize : 10
                };
                var variable1  = 'v'
                $scope.grid = new SpGrid({
                    editMode : true,
                    columnDef: [
                        { id : "__idx", name : "순번", width: "50px", type : "rowno"},
                        { id : "SUBJECT_NO", name : "과목번호", width:"150px", editType : "text"},
                        { id : "BUNBAN", name : "분반", width : "100px", editType : "text"},
                        { id : "CHASU_SEQ", name : "차수", width : "100px", editType : "text"},
                        { id : "COMPT_UNIT_ELE_NO", name : "능력단위요소번호",  width: "200px", editType : "text"},
                        { id : "LIMIT_SCO", name : "요소별 배점", width:"100px", editType : "text"},
                        { id : "USE_YN" , name :"사용여부", width: "80px", editType : {
                            name : "checkbox",
                            trueValue : "Y",
                            falseValue : "N"
                        } }

                    ],
                    registerFunction : [
                        function test(){
                            alert("test!!!" + variable1);
                        }
                    ],
                    pagingOptions : $scope.pagingOptions
                });
                $http.get("test.json")
                    .then(function( response ){
                        console.log(response.data);
                        $scope.grid.setData(response.data);
                        $scope.pagingOptions.totalRecordCount = response.data.length;
                    });

                $scope.showChangedData = function(){
                    console.log($scope.grid.getChangedRow());
                };

                $scope.addRow = function(){
                    $scope.grid.addEmptyRow();
                };

                $scope.test = function(){
                    alert("test");
                }

            }]);
    </script>

    <style>

    </style>
  </head>
  <body ng-app="gridApp" ng-controller="gridController">
  <div class="container">


    <div class="row">
      <div class="col-md-12">
        <sp-grid grid-object="grid">
        </sp-grid>
      </div>
    </div>
    <div class="row" style="margin-top:30px;">
      <sp-grid-paging paging-options="pagingOptions" style="margin-top:20px;">
      </sp-grid-paging>
    </div>


    <p class="text-center" style="margin-top:30px;">
      <button class="btn btn-default" ng-click="showChangedData();">변화된 데이터 찍어보기</button>
      <button class="btn btn-primary" ng-click="addRow()">추가하기</button>
    </p>
  </div>

  </body>

</html>
